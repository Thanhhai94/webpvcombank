<div class="row title">
    <div class="col-5">
        <h5>BÁO CÁO KPIs THÁNG <%= lastMonth%></h5>
    </div>
    <div class="col-3">
        <div class="row">
            <div class="col-4">
                <a class=" <%= KHOI_QL == 'KHCN' ? 'active' : '' %>" href="/KPIs/KHCN/CN/<%=formatSelectedMonth %>">KHCN</a>
            </div>
            <div class="col-4">
                <a class=" <%= KHOI_QL == 'KHDN' ? 'active' : '' %>" href="/KPIs/KHDN/All/<%=formatSelectedMonth %>">KHDN</a>
            </div>
            <div class="col-4">
                <a class=" <%= KHOI_QL == 'KHDNL' ? 'active' : '' %>" href="/KPIs/KHDNL/All/<%=formatSelectedMonth %>">KHDNL</a>
            </div>
        </div>
    </div>
    <div class="col-1"></div>
    <div class="col-1">
        <input id="bao_cao_KPIs" name="bao_cao_KPIs"  type="text" readonly placeholder="Chọn tháng"  />
    </div>
</div>

<script>
    let NHOM_KH = <%- selectNHOMKH %>
    let KHOI_QL = <%- selectKHOIQL %>
    new AirDatepicker('#bao_cao_KPIs', {
    view: 'months',
    minView: 'months',
    dateFormat: 'MMM yyyy',
    position: 'left top',
    locale: {
    days: ['Chủ nhật', 'Thứ 2', 'Thứ 3', 'Thứ 4', 'Thứ 5', 'Thứ 6', 'Thứ 7'],
    daysShort: ['CN', 'T2', 'T3', 'T4', 'T5', 'T6', 'T7'],
    daysMin: ['CN', 'T2', 'T3', 'T4', 'T5', 'T6', 'T7'],
    months: ['Tháng 1','Tháng 2','Tháng 3','Tháng 4','Tháng 5','Tháng 6', 'Tháng 7','Tháng 8','Tháng 9','Tháng 10','Tháng 11','Tháng 12'],
    monthsShort: ['Tháng 1','Tháng 2','Tháng 3','Tháng 4','Tháng 5','Tháng 6', 'Tháng 7','Tháng 8','Tháng 9','Tháng 10','Tháng 11','Tháng 12'],
    today: 'Today',
    clear: 'Clear',
    firstDay: 1},
    onSelect({date}) {
    let day = dayjs(date).format('YYYY-MM-DD')
    var select = new Date(day), y = select.getFullYear(), m = select.getMonth();
    let lastMonth = dayjs(new Date(y,m+1,0,7,0,0)).format("YYYY-MM-DD")
    return window.location.href = `/KPIs/${KHOI_QL}/${NHOM_KH}/${lastMonth}`
   }
})
</script>